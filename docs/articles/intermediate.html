<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Intermediate: Module Building • outsider.devtools</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Intermediate: Module Building">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">outsider.devtools</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/basic.html">Basic</a>
</li>
<li>
  <a href="../articles/intermediate.html">Intermediate</a>
</li>
<li>
  <a href="../articles/advanced.html">Advanced</a>
</li>
<li>
  <a href="../articles/faqs.html">FAQs</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Intermediate: Module Building</h1>
            
      
      
      <div class="hidden name"><code>intermediate.Rmd</code></div>

    </div>

    
    
<p>In <a href="https://antonellilab.github.io/outsider.devtools/articles/intermediate.html">basics</a> we introduced the essential elements that make up a module and then built a super simple module.</p>
<p>On this page, we will build a module for a slightly more complex program while introducing some more functionalities of <code>outsider</code>.</p>
<div id="figlet" class="section level2">
<h2 class="hasAnchor">
<a href="#figlet" class="anchor"></a><code>figlet</code>
</h2>
<p>For this walkthrough, we will be creating a slightly more sophisticated module than <code>om..echo</code> by building a module for <a href="http://www.figlet.org/"><code>figlet</code></a>, a program that takes textual input and returns ASCII art.</p>
<p>The program itself only takes text input and returns text output. We, however, will use <code>outsider</code> to create a module that can either take an input file or text and then return ASCII art to either the console or to an output file.</p>
<p>Not all command-line programs follow the same standards (different input/output file arguments, different help pages …), so <code>outsider</code> comes with a series of functions to provide options for developers for how best they want to encapsulate the program in module form.</p>
<p>(For reference, this module does already exist in the wild: <a href="https://github.com/DomBennett/om..figlet">dombennett/om..figlet</a>)</p>
</div>
<div id="walkthrough" class="section level1">
<h1 class="hasAnchor">
<a href="#walkthrough" class="anchor"></a>Walkthrough</h1>
<div id="building" class="section level2">
<h2 class="hasAnchor">
<a href="#building" class="anchor"></a>Building</h2>
<p>To get started, we will first need our module skeleton.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(outsider.devtools)
flpth &lt;-<span class="st"> </span><span class="kw"><a href="../reference/module_skeleton.html">module_skeleton</a></span>(<span class="dt">repo_user =</span> <span class="st">'dombennett'</span>, <span class="dt">program_name =</span> <span class="st">'figlet'</span>,
                         <span class="dt">docker_user =</span> <span class="st">'dombennett'</span>, <span class="dt">flpth =</span> <span class="kw"><a href="https://rdrr.io/r/base/tempfile.html">tempdir</a></span>(),
                         <span class="dt">service =</span> <span class="st">'github'</span>)
<span class="co"># folder name where module is stored</span>
<span class="kw"><a href="https://rdrr.io/r/base/print.html">print</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/basename.html">basename</a></span>(flpth))</code></pre></div>
<pre><code>## [1] "om..figlet"</code></pre>
<p>Next we will need to develop the Dockerfile! <code>figlet</code> is easy enough to install on Ubuntu Linux, we can just use the “apt-get” system to install it. (Here I’m editing the file from within R to make the process reproducible, you can edit the file directly with a text editor.)</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dockerfile_text &lt;-<span class="st"> "</span>
<span class="st"># select Ubuntu Linux image</span>
<span class="st">FROM ubuntu:latest</span>
<span class="st"># Use the 'apt-get' system to install figlet</span>
<span class="st">RUN apt-get update &amp;&amp; apt-get install -y figlet</span>
<span class="st"># set the working_dir/</span>
<span class="st">RUN mkdir /working_dir</span>
<span class="st">WORKDIR /working_dir</span>
<span class="st">"</span>
<span class="co"># write to latest Dockerfile</span>
<span class="kw"><a href="https://rdrr.io/r/base/cat.html">cat</a></span>(dockerfile_text, <span class="dt">file =</span> <span class="kw"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(flpth, <span class="st">'inst'</span>, <span class="st">'dockerfiles'</span>, <span class="st">'latest'</span>,
                                      <span class="st">'Dockerfile'</span>))</code></pre></div>
<p>Now, we have our Dockerfile set-up and our module skeleton, we must develop the R code. The skeleton code for our <code>figlet</code>-module is currently:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#' @name figlet</span>
<span class="co">#' @title figlet</span>
<span class="co">#' @description Run figlet</span>
<span class="co">#' @param ... Arguments</span>
<span class="co">#' @example /examples/example.R</span>
<span class="co">#' @export</span>
figlet &lt;-<span class="st"> </span><span class="cf">function</span>(...) {
  <span class="co"># convert the ... into a argument list</span>
  arglist &lt;-<span class="st"> </span><span class="kw">arglist_get</span>(...)
  <span class="co"># create an outsider object: describe the arguments and program</span>
  otsdr &lt;-<span class="st"> </span><span class="kw">outsider_init</span>(<span class="dt">pkgnm =</span> <span class="st">'om..figlet'</span>, <span class="dt">cmd =</span> <span class="st">'figlet'</span>,
                         <span class="dt">arglist =</span> arglist)
  <span class="co"># run the command</span>
  <span class="kw">run</span>(otsdr)
}</code></pre></div>
<p>The above function would work fine. It would pass any arguments from the user in R to the <code>figlet</code> program. But because <code>figlet</code> does not come with input/output arguments, we will need to hardcode these into our function and use some if statements and bash to create this functionality. Because this will require calling several commands via the terminal, we can create a shell script that we can then pass through <code>outsider</code> to our container.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">function_text &lt;-<span class="st"> "</span>
<span class="st">#' @name figlet</span>
<span class="st">#' @title figlet</span>
<span class="st">#' @description Run figlet with input and output files.</span>
<span class="st">#' @param arglist Arguments for figlet</span>
<span class="st">#' @param input_file Text input file</span>
<span class="st">#' @param output_file ASCII art output file</span>
<span class="st">#' @details If no input_file, will use arglist argument.</span>
<span class="st">#' If no output_file, will print to console.</span>
<span class="st">#' @example /examples/example.R</span>
<span class="st">#' @export</span>
<span class="st">figlet &lt;- function(arglist = arglist_get(...), input_file = NULL,</span>
<span class="st">                   output_file = NULL) {</span>
<span class="st">  wd &lt;- NULL</span>
<span class="st">  # construct shell script from arglist</span>
<span class="st">  arglist &lt;- c('figlet', arglist)</span>
<span class="st">  if (!is.null(input_file)) {</span>
<span class="st">      # cat the input_file contents to figlet</span>
<span class="st">      # (basename is used because on the container,</span>
<span class="st">      #  filepaths cannot be used.)</span>
<span class="st">      arglist &lt;- c('cat', basename(input_file), '|', arglist)</span>
<span class="st">  }</span>
<span class="st">  if (!is.null(output_file)) {</span>
<span class="st">      # write out the results of figlet to output_file</span>
<span class="st">      arglist &lt;- c(arglist, '&gt;', basename(output_file))</span>
<span class="st">      # determine where returned files should be sent</span>
<span class="st">      wd &lt;- dirpath_get(output_file)</span>
<span class="st">  }</span>
<span class="st">  # write arglist to temp file</span>
<span class="st">  script &lt;- file.path(tempdir(), 'script.sh')</span>
<span class="st">  on.exit(file.remove(script))</span>
<span class="st">  # ensure script is written in binary format</span>
<span class="st">  script_cnntn &lt;- file(script, 'wb')</span>
<span class="st">  cmds &lt;- paste(arglist, collapse = ' ')</span>
<span class="st">  # debug print</span>
<span class="st">  print(cmds)</span>
<span class="st">  write(x = cmds, file = script_cnntn)</span>
<span class="st">  close(script_cnntn)</span>
<span class="st">  # initialise outsider container by specifying the command,</span>
<span class="st">  # the arguments, the files to be sent, and the directory to where</span>
<span class="st">  # returned files should be sent</span>
<span class="st">  otsdr &lt;- outsider_init(pkgnm = 'om..figlet', cmd = 'bash',</span>
<span class="st">                         arglist = 'script.sh', wd = wd,</span>
<span class="st">                         files_to_send = c(script, input_file))</span>
<span class="st">  # run the command</span>
<span class="st">  run(otsdr)</span>
<span class="st">}</span>
<span class="st">"</span>
<span class="co"># write to R/functions.R</span>
<span class="kw"><a href="https://rdrr.io/r/base/cat.html">cat</a></span>(function_text, <span class="dt">file =</span> <span class="kw"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(flpth, <span class="st">'R'</span>, <span class="st">'functions.R'</span>))</code></pre></div>
<blockquote>
<p><strong>What does <code>arglist</code> do?</strong> This function takes R objects and converts them into character strings that then be passed to a command-line program. It can take as many arguments as you want. For example, with <code>figlet</code> you may want to convert the value of <code>a</code> to ASCII art. In this way, you would simply be able to pass <code>a</code> to the <code>figlet</code> function rather than spell it out again.</p>
</blockquote>
<blockquote>
<p><strong>What’s with the <code>#'@</code>?</strong> These are the roxygen tags. They determine the documentation of the function. See <a href="http://r-pkgs.had.co.nz/man.html">“Object documentation”</a> for more details.</p>
</blockquote>
<p>Ok, let’s build the module!</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/module_build.html">module_build</a></span>(<span class="dt">flpth =</span> flpth)</code></pre></div>
<pre><code>## ────────────────────────────────────────────────────────────────────────────────────
## Running devtools::document() ...
## ────────────────────────────────────────────────────────────────────────────────────</code></pre>
<pre><code>## Updating om..figlet documentation</code></pre>
<pre><code>## First time using roxygen2. Upgrading automatically...</code></pre>
<pre><code>## Updating roxygen version in /private/var/folders/ps/g89999v12490dmp0jnsfmykm0043m3/T/Rtmpz6KBU4/om..figlet/DESCRIPTION</code></pre>
<pre><code>## Writing NAMESPACE</code></pre>
<pre><code>## Loading om..figlet</code></pre>
<pre><code>## Writing NAMESPACE
## Writing figlet.Rd
## ────────────────────────────────────────────────────────────────────────────────────
## Running devtools::install() ...
## ────────────────────────────────────────────────────────────────────────────────────
##   
   checking for file ‘/private/var/folders/ps/g89999v12490dmp0jnsfmykm0043m3/T/Rtmpz6KBU4/om..figlet/DESCRIPTION’ ...
  
✔  checking for file ‘/private/var/folders/ps/g89999v12490dmp0jnsfmykm0043m3/T/Rtmpz6KBU4/om..figlet/DESCRIPTION’ (388ms)
## 
  
─  preparing ‘om..figlet’:
## 
  
   checking DESCRIPTION meta-information ...
  
✔  checking DESCRIPTION meta-information
## 
  
─  checking for LF line-endings in source and make files and shell scripts
## 
  
─  checking for empty or unneeded directories
## 
  
─  building ‘om..figlet_0.0.1.tar.gz’
## 
  
   Warning: invalid uid value replaced by that for user 'nobody'
##    Warning: invalid gid value replaced by that for user 'nobody'
## 
  
   
## 
Running /Library/Frameworks/R.framework/Resources/bin/R CMD INSTALL \
##   /var/folders/ps/g89999v12490dmp0jnsfmykm0043m3/T//Rtmpz6KBU4/om..figlet_0.0.1.tar.gz \
##   --install-tests 
## * installing to library ‘/Library/Frameworks/R.framework/Versions/3.6/Resources/library’
## * installing *source* package ‘om..figlet’ ...
## ** using staged installation
## ** R
## ** inst
## ** byte-compile and prepare package for lazy loading
## ** help
## *** installing help indices
## ** building package indices
## ** testing if installed package can be loaded from temporary location
## ** testing if installed package can be loaded from final location
## ** testing if installed package keeps a record of temporary installation path
## * DONE (om..figlet)
## ────────────────────────────────────────────────────────────────────────────────────
## Running docker_build()
## ────────────────────────────────────────────────────────────────────────────────────
## Command:
## docker build -t dombennett/om_figlet:latest /Library/Frameworks/R.framework/Versions/3.6/Resources/library/om..figlet/dockerfiles/latest
## ....................................................................................
## Sending build context to Docker daemon  2.048kB


## Step 1/4 : FROM ubuntu:latest
##  ---&gt; 93fd78260bd1
## Step 2/4 : RUN apt-get update &amp;&amp; apt-get install -y figlet
##  ---&gt; Running in 052eb0427153
## Get:1 http://archive.ubuntu.com/ubuntu bionic InRelease [242 kB]
## Get:2 http://security.ubuntu.com/ubuntu bionic-security InRelease [88.7 kB]
## Get:3 http://archive.ubuntu.com/ubuntu bionic-updates InRelease [88.7 kB]
## Get:4 http://archive.ubuntu.com/ubuntu bionic-backports InRelease [74.6 kB]
## Get:5 http://security.ubuntu.com/ubuntu bionic-security/multiverse amd64 Packages [5944 B]
## Get:6 http://security.ubuntu.com/ubuntu bionic-security/restricted amd64 Packages [12.6 kB]
## Get:7 http://security.ubuntu.com/ubuntu bionic-security/main amd64 Packages [695 kB]
## Get:8 http://archive.ubuntu.com/ubuntu bionic/restricted amd64 Packages [13.5 kB]
## Get:9 http://archive.ubuntu.com/ubuntu bionic/multiverse amd64 Packages [186 kB]
## Get:10 http://security.ubuntu.com/ubuntu bionic-security/universe amd64 Packages [782 kB]
## Get:11 http://archive.ubuntu.com/ubuntu bionic/main amd64 Packages [1344 kB]
## Get:12 http://archive.ubuntu.com/ubuntu bionic/universe amd64 Packages [11.3 MB]
## Get:13 http://archive.ubuntu.com/ubuntu bionic-updates/universe amd64 Packages [1301 kB]
## Get:14 http://archive.ubuntu.com/ubuntu bionic-updates/restricted amd64 Packages [23.2 kB]
## Get:15 http://archive.ubuntu.com/ubuntu bionic-updates/main amd64 Packages [990 kB]
## Get:16 http://archive.ubuntu.com/ubuntu bionic-updates/multiverse amd64 Packages [9022 B]
## Get:17 http://archive.ubuntu.com/ubuntu bionic-backports/main amd64 Packages [2496 B]
## Get:18 http://archive.ubuntu.com/ubuntu bionic-backports/universe amd64 Packages [4227 B]
## Fetched 17.2 MB in 6s (2911 kB/s)
## Reading package lists...
## Reading package lists...
## Building dependency tree...
## Reading state information...
## The following NEW packages will be installed:
##   figlet
## 0 upgraded, 1 newly installed, 0 to remove and 44 not upgraded.
## Need to get 133 kB of archives.
## After this operation, 752 kB of additional disk space will be used.
## Get:1 http://archive.ubuntu.com/ubuntu bionic/universe amd64 figlet amd64 2.2.5-3 [133 kB]
## [91mdebconf: delaying package configuration, since apt-utils is not installed
## [0mFetched 133 kB in 0s (676 kB/s)
## Selecting previously unselected package figlet.
## (Reading database ... 
(Reading database ... 5%
(Reading database ... 10%
(Reading database ... 15%
(Reading database ... 20%
(Reading database ... 25%
(Reading database ... 30%
(Reading database ... 35%
(Reading database ... 40%
(Reading database ... 45%
(Reading database ... 50%
(Reading database ... 55%
(Reading database ... 60%
(Reading database ... 65%
(Reading database ... 70%
(Reading database ... 75%
(Reading database ... 80%
(Reading database ... 85%
(Reading database ... 90%
(Reading database ... 95%
(Reading database ... 100%
(Reading database ... 4038 files and directories currently installed.)
## Preparing to unpack .../figlet_2.2.5-3_amd64.deb ...
## Unpacking figlet (2.2.5-3) ...
## Setting up figlet (2.2.5-3) ...
## update-alternatives: using /usr/bin/figlet-figlet to provide /usr/bin/figlet (figlet) in auto mode
## update-alternatives: warning: skip creation of /usr/share/man/man6/figlet.6.gz because associated file /usr/share/man/man6/figlet-figlet.6.gz (of link group figlet) doesn't exist
## Removing intermediate container 052eb0427153
##  ---&gt; dca32cdcf6f7
## Step 3/4 : RUN mkdir /working_dir
##  ---&gt; Running in ebe35ba5a9ba
## Removing intermediate container ebe35ba5a9ba
##  ---&gt; ed1d2f848bb2
## Step 4/4 : WORKDIR /working_dir
##  ---&gt; Running in 01cae1a7a3bd
## Removing intermediate container 01cae1a7a3bd
##  ---&gt; afd046389a52
## Successfully built afd046389a52
## Successfully tagged dombennett/om_figlet:latest</code></pre>
<pre><code>## [1] TRUE</code></pre>
<p>Does it work?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(outsider)</code></pre></div>
<pre><code>## ----------------
## outsider v 0.1.0
## ----------------
## - Security notice: be sure of which modules you install</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">figlet &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/outsider/man/module_import.html">module_import</a></span>(<span class="st">'figlet'</span>, <span class="dt">repo =</span> <span class="st">'dombennett/om..figlet'</span>)
<span class="co"># without files</span>
<span class="kw">figlet</span>(<span class="dt">arglist =</span> <span class="st">'hello!'</span>)</code></pre></div>
<pre><code>## [1] "figlet hello!"
##  _          _ _       _ 
## | |__   ___| | | ___ | |
## | '_ \ / _ \ | |/ _ \| |
## | | | |  __/ | | (_) |_|
## |_| |_|\___|_|_|\___/(_)
## </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># with input file</span>
input_file &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/tempfile.html">tempdir</a></span>(), <span class="st">'input_figlet.txt'</span>)
<span class="kw"><a href="https://rdrr.io/r/base/cat.html">cat</a></span>(<span class="st">'This is from the input text file!'</span>, <span class="dt">file =</span> input_file)
<span class="kw">figlet</span>(<span class="dt">arglist =</span> <span class="st">''</span>, <span class="dt">input_file =</span> input_file)</code></pre></div>
<pre><code>## [1] "cat input_figlet.txt | figlet "
##  _____ _     _       _        __                       _   _          
## |_   _| |__ (_)___  (_)___   / _|_ __ ___  _ __ ___   | |_| |__   ___ 
##   | | | '_ \| / __| | / __| | |_| '__/ _ \| '_ ` _ \  | __| '_ \ / _ \
##   | | | | | | \__ \ | \__ \ |  _| | | (_) | | | | | | | |_| | | |  __/
##   |_| |_| |_|_|___/ |_|___/ |_| |_|  \___/|_| |_| |_|  \__|_| |_|\___|
##                                                                       
##  _                   _     _            _      __ _ _      _ 
## (_)_ __  _ __  _   _| |_  | |_ _____  _| |_   / _(_) | ___| |
## | | '_ \| '_ \| | | | __| | __/ _ \ \/ / __| | |_| | |/ _ \ |
## | | | | | |_) | |_| | |_  | ||  __/&gt;  &lt;| |_  |  _| | |  __/_|
## |_|_| |_| .__/ \__,_|\__|  \__\___/_/\_\\__| |_| |_|_|\___(_)
##         |_|</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># with output file</span>
output_file &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/tempfile.html">tempdir</a></span>(), <span class="st">'output_figlet.txt'</span>)
<span class="kw">figlet</span>(<span class="dt">arglist =</span> <span class="st">'Into the output file'</span>, <span class="dt">output_file =</span> output_file)</code></pre></div>
<pre><code>## [1] "figlet Into the output file &gt; output_figlet.txt"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://rdrr.io/r/base/cat.html">cat</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/readLines.html">readLines</a></span>(<span class="dt">con =</span> output_file), <span class="dt">sep =</span> <span class="st">'</span><span class="ch">\n</span><span class="st">'</span>)</code></pre></div>
<pre><code>##  ___       _          _   _                        _               _   
## |_ _|_ __ | |_ ___   | |_| |__   ___    ___  _   _| |_ _ __  _   _| |_ 
##  | || '_ \| __/ _ \  | __| '_ \ / _ \  / _ \| | | | __| '_ \| | | | __|
##  | || | | | || (_) | | |_| | | |  __/ | (_) | |_| | |_| |_) | |_| | |_ 
## |___|_| |_|\__\___/   \__|_| |_|\___|  \___/ \__,_|\__| .__/ \__,_|\__|
##                                                       |_|              
##   __ _ _      
##  / _(_) | ___ 
## | |_| | |/ _ \
## |  _| | |  __/
## |_| |_|_|\___|
## </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># from input file to output file... with font block!</span>
<span class="kw">figlet</span>(<span class="dt">arglist =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">'-f'</span>, <span class="st">'block'</span>), <span class="dt">input_file =</span> input_file,
       <span class="dt">output_file =</span> output_file)</code></pre></div>
<pre><code>## [1] "cat input_figlet.txt | figlet -f block &gt; output_figlet.txt"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://rdrr.io/r/base/cat.html">cat</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/readLines.html">readLines</a></span>(<span class="dt">con =</span> output_file), <span class="dt">sep =</span> <span class="st">'</span><span class="ch">\n</span><span class="st">'</span>)</code></pre></div>
<pre><code>##                                                       
## _|_|_|_|_|  _|        _|                _|            
##     _|      _|_|_|          _|_|_|            _|_|_|  
##     _|      _|    _|  _|  _|_|          _|  _|_|      
##     _|      _|    _|  _|      _|_|      _|      _|_|  
##     _|      _|    _|  _|  _|_|_|        _|  _|_|_|    
##                                                       
##                                                       
##                                               
##     _|_|                                      
##   _|      _|  _|_|    _|_|    _|_|_|  _|_|    
## _|_|_|_|  _|_|      _|    _|  _|    _|    _|  
##   _|      _|        _|    _|  _|    _|    _|  
##   _|      _|          _|_|    _|    _|    _|  
##                                               
##                                               
##                                                                               
##   _|      _|                      _|                                  _|      
## _|_|_|_|  _|_|_|      _|_|            _|_|_|    _|_|_|    _|    _|  _|_|_|_|  
##   _|      _|    _|  _|_|_|_|      _|  _|    _|  _|    _|  _|    _|    _|      
##   _|      _|    _|  _|            _|  _|    _|  _|    _|  _|    _|    _|      
##     _|_|  _|    _|    _|_|_|      _|  _|    _|  _|_|_|      _|_|_|      _|_|  
##                                                 _|                            
##                                                 _|                            
##                                                                             
##   _|                            _|              _|_|  _|  _|            _|  
## _|_|_|_|    _|_|    _|    _|  _|_|_|_|        _|          _|    _|_|    _|  
##   _|      _|_|_|_|    _|_|      _|          _|_|_|_|  _|  _|  _|_|_|_|  _|  
##   _|      _|        _|    _|    _|            _|      _|  _|  _|            
##     _|_|    _|_|_|  _|    _|      _|_|        _|      _|  _|    _|_|_|  _|  
##                                                                             
## </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># clean-up</span>
<span class="kw"><a href="https://rdrr.io/r/base/files.html">file.remove</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(input_file, output_file))</code></pre></div>
<pre><code>## [1] TRUE TRUE</code></pre>
</div>
<div id="check-test-and-deploy" class="section level2">
<h2 class="hasAnchor">
<a href="#check-test-and-deploy" class="anchor"></a>Check, test and deploy</h2>
<p>Ok! So we have a functioning module. But how do we know it’s a functioning module? To check our module structre, configuration and functioning we have a few helpful functions.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># make sure the folder structure is correct</span>
<span class="kw"><a href="../reference/module_check.html">module_check</a></span>(<span class="dt">flpth =</span> flpth)</code></pre></div>
<pre><code>## DESCRIPTION found ✔
## R folder with files found ✔
## inst found ✔
## inst/om.yml found ✔
## inst/dockerfiles found ✔
## inst/dockerfiles/latest with one Dockerfile found ✔</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># check are the names of the module components</span>
<span class="kw"><a href="../reference/module_identities.html">module_identities</a></span>(<span class="dt">flpth =</span> flpth)</code></pre></div>
<pre><code>## R package name: 'om..figlet'
## URL: 'https://github.com/dombennett/om..figlet'
## Docker images: 'dombennett/om_figlet:latest'</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># test that the module works</span>
<span class="co"># module_test(flpth = flpth)</span></code></pre></div>
<p>Running <code>module_test</code> we will find that there is an issue with the module. <code>module_test</code> checks the functioning of the code by running the example; our current example tries to call <code>-h</code> with <code>figlet</code> – which is an invalid argument. To correct this we can simply updated our example.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">example_text &lt;-<span class="st"> "</span>
<span class="st">library(outsider)</span>
<span class="st">figlet &lt;- module_import('figlet', repo = 'dombennett/om..figlet')</span>
<span class="st">figlet('hello!')</span>
<span class="st">"</span>
<span class="co"># write to examples/example.R</span>
<span class="kw"><a href="https://rdrr.io/r/base/cat.html">cat</a></span>(example_text, <span class="dt">file =</span> <span class="kw"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(flpth, <span class="st">'examples'</span>, <span class="st">'example.R'</span>))
<span class="co"># re-build package</span>
<span class="kw"><a href="../reference/module_build.html">module_build</a></span>(<span class="dt">flpth =</span> flpth, <span class="dt">build_image =</span> <span class="ot">FALSE</span>, <span class="dt">verbose =</span> <span class="ot">FALSE</span>)</code></pre></div>
<pre><code>## ────────────────────────────────────────────────────────────────────────────────────
## Running devtools::document() ...
## ────────────────────────────────────────────────────────────────────────────────────</code></pre>
<pre><code>## Updating om..figlet documentation</code></pre>
<pre><code>## Writing NAMESPACE</code></pre>
<pre><code>## Loading om..figlet</code></pre>
<pre><code>## Writing NAMESPACE
## Writing figlet.Rd
## ────────────────────────────────────────────────────────────────────────────────────
## Running devtools::install() ...
## ────────────────────────────────────────────────────────────────────────────────────</code></pre>
<pre><code>## 
## Attaching package: 'om..figlet'</code></pre>
<pre><code>## The following object is masked _by_ '.GlobalEnv':
## 
##     figlet</code></pre>
<p>Now re-running the test …</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/module_test.html">module_test</a></span>(<span class="dt">flpth =</span> flpth)</code></pre></div>
<pre><code>## 
## Running /Library/Frameworks/R.framework/Resources/bin/R CMD INSTALL \
##   /private/var/folders/ps/g89999v12490dmp0jnsfmykm0043m3/T/Rtmpz6KBU4/om..figlet \
##   --install-tests 
## * installing to library ‘/Library/Frameworks/R.framework/Versions/3.6/Resources/library’
## * installing *source* package ‘om..figlet’ ...
## ** using staged installation
## ** R
## ** inst
## ** byte-compile and prepare package for lazy loading
## ** help
## *** installing help indices
## ** building package indices
## ** testing if installed package can be loaded from temporary location
## ** testing if installed package can be loaded from final location
## ** testing if installed package keeps a record of temporary installation path
## * DONE (om..figlet)</code></pre>
<pre><code>## 
## Attaching package: 'om..figlet'</code></pre>
<pre><code>## The following object is masked _by_ '.GlobalEnv':
## 
##     figlet</code></pre>
<pre><code>## [1] "figlet hello!"</code></pre>
<pre><code>## Removing package from '/Library/Frameworks/R.framework/Versions/3.6/Resources/library'
## (as 'lib' is unspecified)</code></pre>
<pre><code>## Ole! The module works! You are stylish!</code></pre>
<p>Nice! The package passes. That means we can upload the package to GitHub and Docker-Hub using the same functions as we saw in “basic”.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/module_upload.html">module_upload</a></span>(<span class="dt">flpth =</span> flpth, <span class="dt">code_sharing =</span> <span class="ot">TRUE</span>, <span class="dt">dockerhub =</span> <span class="ot">TRUE</span>)</code></pre></div>
<hr>
<p><strong>Delete it all</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://rdrr.io/pkg/outsider/man/module_uninstall.html">module_uninstall</a></span>(<span class="dt">repo =</span> <span class="st">'om..figlet'</span>)
<span class="kw"><a href="https://rdrr.io/r/base/unlink.html">unlink</a></span>(<span class="dt">x =</span> flpth, <span class="dt">recursive =</span> <span class="ot">TRUE</span>, <span class="dt">force =</span> <span class="ot">TRUE</span>)</code></pre></div>
<hr>
</div>
<div id="next-up-advanced" class="section level2">
<h2 class="hasAnchor">
<a href="#next-up-advanced" class="anchor"></a>Next-up: <a href="https://antonellilab.github.io/outsider.devtools/articles/advanced.html">Advanced</a>
</h2>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#figlet"><code>figlet</code></a></li>
      <li>
<a href="#walkthrough">Walkthrough</a><ul class="nav nav-pills nav-stacked">
<li><a href="#building">Building</a></li>
      <li><a href="#check-test-and-deploy">Check, test and deploy</a></li>
      <li>
<a href="#next-up-advanced">Next-up: </a><a href="https://antonellilab-github-io/outsider-devtools/articles/advanced-html">Advanced</a>
</li>
      </ul>
</li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Dom Bennett.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.9100.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
